---
title: pip正确安装方法简记
date: 2017-06-14 14:51:00
categories:
 - [Coding, Python]
tags: 
 - pip
 - flexget
 - Autoseed
permalink: /archives/413/
---

今天在给发种姬搬家的时候发现了一个很奇怪的问题。。
在安转flexget时候提示

```bash
Exception:
Traceback (most recent call last):
File "/usr/lib/python2.7/dist-packages/pip/basecommand.py", line 122, in main
status = self.run(options, args)
File "/usr/lib/python2.7/dist-packages/pip/commands/install.py", line 290, in run
requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
File "/usr/lib/python2.7/dist-packages/pip/req.py", line 1266, in prepare_files
req_to_install.extras):
File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2401, in requires
dm = self._dep_map
File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2597, in _dep_map
self.__dep_map = self._compute_dependencies()
File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2621, in _compute_dependencies
parsed = next(parse_requirements(distvers))
File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 49, in &lt;lambda&gt;
next = lambda o: o.next()
File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2721, in parse_requirements
"version spec")
File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2686, in scan_list
raise ValueError(msg, line, "at", line[p:])
ValueError: ('Expected version spec in', 'requests ~=2.16.3', 'at', ' ~=2.16.3')
Storing debug log for failure in /root/.pip/pip.log
```

并且使用 `pip install -U pip` 和 `pip install -U requests` 均没能解决问题。

分别提示pip已经是最新的版本，在升级requests时候则提示
`Not uninstalling requests at /usr/lib/python2.7/dist-packages, owned by OS`
仔细回看了一下前面使用apt-get安装pip时候的时候，系统自动把低版本的requests给装上了（这里甚是奇怪。以前都没有出现过这种问题，估计是使用的源的问题。）

那么原来在配置Autoseed时候安装flexget的过程前安装pip(py2)就不能那么写了。。参照官方的安装方法。要改成这样的

```bash
wget https://bootstrap.pypa.io/get-pip.py
python get-pip.py
```

如果已经使用apt-get安装了pip，要卸载使用正确的方法安装，则应该

```bash
apt-get remove python-pip
wget https://bootstrap.pypa.io/get-pip.py
python get-pip.py
hash -r
```

以上参见：

 1. [Installing with get-pip.py](https://pip.pypa.io/en/stable/installing/#installing-with-get-pip-py)
 2. [/usr/bin/pip: No such file or directory](http://cheng.logdown.com/posts/2015/06/14/-usr-bin-pip-no-such-file-or-directory)
